## คู่มือผู้ใช้งาน (User Manual) ระบบ AI Camera (ALPR) – v1.3

บทเอกสารนี้เป็นเทมเพลตสำหรับผู้ใช้งานปลายทางทุกบทบาท: User, Admin, Manager และ Analyst ครอบคลุมการใช้งานผ่านเว็บอินเตอร์เฟส ขั้นตอนการทำงาน ฟังก์ชันหลัก และพื้นที่สำหรับใส่ภาพหน้าจอประกอบรายงาน

---

### 1) ภาพรวมระบบ
- ระบบ: AI Camera (Automatic License Plate Recognition – ALPR) บน Edge (Raspberry Pi 5 + Camera Module 3 + Hailo 8/8L)
- ใช้งานผ่านเว็บอินเตอร์เฟส (Nginx → Gunicorn → Flask)
- ฟังก์ชันหลัก: ดูภาพจากกล้อง, ควบคุมกล้อง, เปิด/หยุดการตรวจจับ, ดูผลตรวจจับ, ดูสถานะระบบ (Health), ติดตามการเชื่อมต่อ WebSocket
- URL ตัวอย่างเข้าถึงระบบ: `http://<host>/`

> [screenshot: หน้า Dashboard รวม]

---

### 2) บทบาทผู้ใช้งาน (Roles & Permissions)
- **User**: ดูภาพกล้องสด, ดูสถานะพื้นฐาน, เรียกดูผลตรวจจับล่าสุด
- **Analyst**: วิเคราะห์ผลตรวจจับ, ค้นหา/กรอง/เรียงข้อมูล, ส่งออกข้อมูลรายงาน
- **Manager**: ตรวจติดตามสถานะระบบ, สถิติการตรวจจับ, ตัดสินใจเชิงปฏิบัติการ (เช่น เปิด/หยุดการตรวจจับ)
- **Admin**: ตั้งค่าใช้งาน, ควบคุมกล้อง, จัดการบริการ (camera/detection/health/websocket), ตั้งค่าแวดล้อม

หมายเหตุ: ระบบปัจจุบันไม่ได้แยกสิทธิ์แบบล็อกอินหลายระดับที่ UI แต่ควรใช้บทบาทเป็นแนวทางการใช้งานและ SOP ภายในหน่วยงาน

---

### 3) เริ่มต้นการใช้งาน (Getting Started)
1. เปิดเว็บเบราว์เซอร์ไปยัง `http://<host>/`
2. ตรวจสอบสถานะกล้อง (Initialized/Streaming) ที่หน้า Dashboard
3. เลือกเมนูตามภารกิจงาน: Camera, Detection, Health, Results (ถ้ามี), WebSocket

> [screenshot: เมนูนำทางด้านบน]

---

### 4) หน้าหลัก (Dashboard)
- แสดงข้อมูลระบบโดยสรุป: กล้อง, สถานะบริการ, ข้อมูลระบบ
- ปุ่มลัดไปยังหน้าฟีเจอร์สำคัญ

> [screenshot: Dashboard แสดงสถานะกล้องและระบบ]

---

### 5) กล้อง (Camera)
ที่อยู่หน้า: `/camera`

ฟังก์ชันหลัก:
- ดูสถานะกล้อง (initialized/streaming, FPS, uptime)
- เริ่ม/หยุด/รีสตาร์ตกล้อง
- ดูฟีดวิดีโอแบบ MJPEG: `/camera/video_feed` (คุณภาพปกติ), `/camera/video_feed_lores` (ความละเอียดต่ำ)
- ดู/อัปเดตการตั้งค่ากล้อง (ผ่าน API `/camera/config`)

ขั้นตอนใช้งานทั่วไป:
1. เข้า `/camera` ตรวจสอบสถานะ
2. กด Start/Stop/Restart ตามต้องการ
3. เปิดแท็บใหม่ดูวิดีโอสตรีม (ถ้าต้องการ)

> [screenshot: หน้า Camera + ปุ่มควบคุม]

เคล็ดลับการใช้งาน:
- หากสตรีมไม่ติด ให้ตรวจสอบ Health และรีสตาร์ตกล้อง
- หากภาพมืด/สว่างเกินไป ปรับค่า Brightness/Contrast/Sharpness ในส่วน Config

---

### 6) การตรวจจับ (Detection)
ที่อยู่หน้า: `/detection`

ฟังก์ชันหลัก:
- เริ่ม/หยุดบริการตรวจจับ (Start/Stop)
- สถานะกระบวนการตรวจจับ (กำลังทำงาน/สถิติ/อัตราความสำเร็จ)
- เรียกประมวลผลเฟรมเดี่ยว (ทดสอบ) `/detection/process_frame`
- ดูสถิติแบบสรุป `/detection/statistics`

ขั้นตอนใช้งานทั่วไป:
1. เข้า `/detection` ตรวจสอบว่าโมเดลพร้อมใช้งาน
2. กด Start เพื่อเริ่มตรวจจับแบบต่อเนื่อง
3. เปิดหน้า Results (ถ้ามี) เพื่อตรวจยืนยันผล

> [screenshot: หน้า Detection + ปุ่ม Start/Stop]

---

### 7) ผลการตรวจจับ (Results/Reports)
ที่อยู่หน้า (ถ้ามี): `/detection_results`

ฟังก์ชันหลัก:
- แสดงตารางผลตรวจจับล่าสุด (รองรับค้นหา/กรอง/เรียง/แบ่งหน้า)
- ดูรายละเอียดรายการ (ภาพประกอบ, กล่องกรอบ, OCR)
- ส่งออก CSV/JSON ตามตัวกรองปัจจุบัน

ขั้นตอนใช้งานสำหรับ Analyst/Manager:
1. เลือกช่วงเวลา/เงื่อนไขค้นหา/กรองข้อมูล
2. กด Export เพื่อดาวน์โหลดรายงาน

> [screenshot: ตารางผลตรวจจับ + กล่องค้นหา/กรอง]

---

### 8) สุขภาพระบบ (Health)
ที่อยู่หน้า: `/health`

ฟังก์ชันหลัก:
- ดูสถานะสุขภาพระบบรวม `/health/system`
- ดูบันทึกการตรวจสอบสุขภาพ `/health/logs`
- เริ่ม/หยุดการตรวจสุขภาพแบบต่อเนื่อง (กำหนดช่วงเวลาได้)

กรณีใช้งานจริง:
- หากกล้องไม่เริ่ม ให้เช็ก Health → Camera
- พื้นที่เก็บข้อมูลใกล้เต็ม ให้เช็ก Health → Disk Space และล้างข้อมูลเก่า

> [screenshot: หน้า Health + สรุปสถานะ]

---

### 9) สถานะการเชื่อมต่อ (WebSocket)
ที่อยู่หน้า: `/websocket`

ฟังก์ชันหลัก:
- ดูสถานะการเชื่อมต่อกับเซิร์ฟเวอร์ภายนอก (ออนไลน์/ออฟไลน์)
- ระบบรองรับ Offline Mode โดยจะบันทึกข้อมูลไว้ในเครื่องและส่งย้อนหลังเมื่อออนไลน์

> [screenshot: หน้า WebSocket Status]

---

### 10) คำแนะนำการใช้งานที่ดี (Best Practices)
- ปรับแต่งมุมกล้อง/ความสูงให้เห็นทะเบียนชัดเจน
- คงค่าแสง/โฟกัสที่เหมาะสมและคงที่เพื่อลด false OCR
- ตรวจสอบ Health เป็นประจำ โดยเฉพาะ Disk/CPU/RAM
- สำรองฐานข้อมูลอย่างสม่ำเสมอ หากใช้งานต่อเนื่อง

---

### 11) คำถามที่พบบ่อย (FAQ) และการแก้ปัญหาเบื้องต้น
- สตรีมไม่ขึ้น: รีเฟรชหน้า, เช็ก `/camera/status`, ลอง Restart กล้อง
- ตรวจจับไม่เริ่ม: เช็กว่าโมเดลโหลดสำเร็จในหน้า Detection/Health → Models
- รายงานว่าง: เช็กช่วงเวลาค้นหา/กรอง, ตรวจว่า Detection ทำงานอยู่
- เซิร์ฟเวอร์ปลายทางล่ม: ระบบจะเข้าสู่ Offline Mode อัตโนมัติและส่งย้อนหลังภายหลัง

---

### 12) ภาคผนวก: ลิงก์/Endpoints สำคัญ
```text
/                      # Dashboard
/camera               # กล้อง
/camera/video_feed    # สตรีมภาพ
/detection            # ตรวจจับ
/detection/statistics # สถิติ
/detection_results    # ผลตรวจจับ (ถ้ามี)
/health               # สุขภาพระบบ
/websocket            # สถานะการเชื่อมต่อ
```

---

พื้นที่สำหรับแนบภาพหน้าจอ (แนบไฟล์ไว้ใน `doc/images/` และอ้างอิงด้วย Markdown):
- [screenshot: dashboard-overview]
- [screenshot: camera-dashboard]
- [screenshot: detection-dashboard]
- [screenshot: detection-results-table]
- [screenshot: health-dashboard]
- [screenshot: websocket-status]


