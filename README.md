# PWD Vision Works - Library

**Utilities library for Computer Vision and AI projects**

‡πÄ‡∏õ‡πá‡∏ô library ‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡πÅ‡∏•‡∏∞‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡πà‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏£‡∏∞‡∏ö‡∏ö Computer Vision ‡πÅ‡∏•‡∏∞ AI ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢ ‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏™‡∏π‡∏á ‡πÅ‡∏•‡∏∞‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÉ‡∏ô‡∏™‡∏†‡∏≤‡∏û‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°‡∏Å‡∏≤‡∏£‡∏ú‡∏•‡∏¥‡∏ï (Production)

## üåü Features

- üì∑ **Camera Management**: ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Raspberry Pi Camera ‡πÅ‡∏•‡∏∞ USB Camera
- üöÄ **Hailo8 AI Integration**: ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏• AI ‡∏î‡πâ‡∏ß‡∏¢ Hailo8 accelerator
- üñºÔ∏è **Image Processing**: ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡∏Ñ‡∏£‡∏ö‡∏Ñ‡∏£‡∏±‡∏ô
- üìä **Graph Utilities**: ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Å‡∏£‡∏≤‡∏ü
- üõ†Ô∏è **Drawing Utilities**: ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏î‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ö‡∏ô‡∏†‡∏≤‡∏û
- üìö **Knowledge Base**: ‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡πÅ‡∏•‡∏∞ best practices

## üèóÔ∏è Project Structure

```
pwd_library/
‚îú‚îÄ‚îÄ üìÅ camera/                    # Camera management
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py              
‚îÇ   ‚îî‚îÄ‚îÄ picamera2_cm3.py         # Raspberry Pi Camera Manager
‚îú‚îÄ‚îÄ üìÅ dev-knowledge-base/       # Documentation & guides
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ ai_vision/            # AI/Vision best practices
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ camera/               # Camera management guides
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ deployment/           # Deployment guides
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ python/               # Python best practices
‚îÇ   ‚îî‚îÄ‚îÄ üìÅ [other topics]/
‚îú‚îÄ‚îÄ üìÅ graph/                    # Graph utilities
‚îÇ   ‚îî‚îÄ‚îÄ graph_utils.py
‚îú‚îÄ‚îÄ üìÅ hailo/                    # Hailo AI processor
‚îÇ   ‚îú‚îÄ‚îÄ coco.txt                 # COCO class names
‚îÇ   ‚îî‚îÄ‚îÄ detect.py                # Detection utilities
‚îú‚îÄ‚îÄ üìÅ image_processing/         # Image processing tools
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ preprocessor.py          # Image preprocessing
‚îÇ   ‚îî‚îÄ‚îÄ postprocessor.py         # Results post-processing
‚îú‚îÄ‚îÄ üìÅ model/                    # AI model management
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ hailo8_processor.py      # Hailo8 processor
‚îú‚îÄ‚îÄ üìÅ utils/                    # Common utilities
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ drawing_utils.py         # Drawing and visualization
‚îÇ   ‚îî‚îÄ‚îÄ exceptions.py            # Custom exceptions
‚îú‚îÄ‚îÄ üìÑ README.md
‚îî‚îÄ‚îÄ üìÑ LICENSE
```

## üöÄ Installation

### ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ö‡∏ö Submodule

‡πÄ‡∏û‡∏¥‡πà‡∏° PWD Library ‡πÄ‡∏õ‡πá‡∏ô Git Submodule ‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì:

```bash
# ‡πÄ‡∏û‡∏¥‡πà‡∏° submodule
git submodule add https://github.com/popwandee/pwd_library.git

### ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Dependencies

```bash
# ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Python dependencies
pip install -r requirements.txt

# ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Raspberry Pi Camera
sudo apt install libcamera-apps python3-picamera2

# ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Hailo8 (‡∏î‡∏π‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡πÉ‡∏ô dev-knowledge-base/ai_vision/)
# Download ‡πÅ‡∏•‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á HailoRT ‡∏à‡∏≤‡∏Å hailo.ai
```

## üí° Quick Start

### 1. ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏•‡πâ‡∏≠‡∏á

```python
from pwd_library.camera.picamera2_cm3 import PiCameraManager

# ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Å‡∏•‡πâ‡∏≠‡∏á
with PiCameraManager() as camera:
    # ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Å‡∏•‡πâ‡∏≠‡∏á
    camera.initialize_camera(resolution=(1920, 1080), framerate=30)
    
    # ‡∏à‡∏±‡∏ö‡∏†‡∏≤‡∏û
    image = camera.capture_image()
    
    # ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏†‡∏≤‡∏û
    camera.capture_to_file("captured_image.jpg")
    
    # ‡πÄ‡∏£‡∏¥‡πà‡∏° video streaming
    camera.start_video_stream(resolution=(640, 480))
    frame = camera.get_frame()
```

### 2. AI Processing ‡∏î‡πâ‡∏ß‡∏¢ Hailo8

```python
from pwd_library.model.hailo8_processor import Hailo8Processor
from pwd_library.image_processing.preprocessor import ImagePreprocessor
import cv2

# ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô processor
with Hailo8Processor("models/yolov8n.hef") as processor:
    # ‡∏≠‡πà‡∏≤‡∏ô‡∏†‡∏≤‡∏û
    image = cv2.imread("input.jpg")
    
    # ‡∏ó‡∏≥ inference
    results = processor.predict(image)
    
    # ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
    for detection in results:
        print(f"Object: {detection['class']}, Confidence: {detection['confidence']}")
```

### 3. Image Processing

```python
from pwd_library.image_processing.preprocessor import ImagePreprocessor
import cv2

# ‡∏™‡∏£‡πâ‡∏≤‡∏á preprocessor
preprocessor = ImagePreprocessor(target_size=(640, 640))

# ‡∏≠‡πà‡∏≤‡∏ô‡∏†‡∏≤‡∏û
image = cv2.imread("input.jpg")

# Preprocess ‡∏†‡∏≤‡∏û
resized = preprocessor.resize_with_padding(image)
normalized = preprocessor.normalize(resized, method="imagenet")

# ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ preprocess ‡πÅ‡∏ö‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö model
processed = preprocessor.preprocess_for_model(image, model_type="yolo")
```

### 4. Drawing ‡πÅ‡∏•‡∏∞ Visualization

```python
from pwd_library.utils.drawing_utils import draw_detections
import cv2

# ‡∏ß‡∏≤‡∏î‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö
image_with_boxes = draw_detections(image, results)

# ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
cv2.imshow("Detections", image_with_boxes)
cv2.waitKey(0)
cv2.destroyAllWindows()
```

## üìã Requirements

### System Requirements
- **Python**: 3.8+
- **OS**: Ubuntu 20.04+ / Raspberry Pi OS
- **Hardware**: Raspberry Pi 4/5 (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö camera ‡πÅ‡∏•‡∏∞ edge computing)

### Python Dependencies
```
opencv-python>=4.5.0
numpy>=1.21.0
pillow>=8.3.0
picamera2  # ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Raspberry Pi Camera
hailo-platform  # ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Hailo8 AI
```

### Hardware Support
- **Cameras**: 
  - Raspberry Pi Camera Module v2/v3
  - USB UVC compatible cameras
  - Industrial cameras
- **AI Accelerators**: 
  - Hailo8 AI processor
  - Support for other accelerators (coming soon)

## üìö Documentation

### Best Practices Guides
- [Python Best Practices](dev-knowledge-base/python/best_practices.md)
- [Hailo AI Best Practices](dev-knowledge-base/ai_vision/hailo_best_practices.md)
- [Camera Management](dev-knowledge-base/camera/camera_management.md)
- [Deployment Guide](dev-knowledge-base/deployment/deployment_guide.md)

### Technical References
- [Linux Commands](dev-knowledge-base/linux_commands/)
- [Network Configuration](dev-knowledge-base/network/)
- [Docker Usage](dev-knowledge-base/docker/)
- [Database Management](dev-knowledge-base/sql/)

## üîß Configuration

‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå `config.yaml` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö:

```yaml
# config.yaml
system:
  name: "PWD Vision System"
  log_level: "INFO"
  
camera:
  type: "picamera2"
  resolution: [1920, 1080]
  framerate: 30
  
hailo:
  model_path: "models/yolov8n.hef"
  confidence_threshold: 0.5
  nms_threshold: 0.4
  
image_processing:
  target_size: [640, 640]
  normalization: "imagenet"
```

## üöÄ Advanced Usage

### Multi-Camera Setup

```python
from pwd_library.camera.picamera2_cm3 import MultiCameraManager

# ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏•‡∏≤‡∏¢‡∏Å‡∏•‡πâ‡∏≠‡∏á
camera_manager = MultiCameraManager()

# ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏•‡πâ‡∏≠‡∏á
camera_manager.add_camera("main", "pi_camera", {"resolution": (1920, 1080)})
camera_manager.add_camera("side", "usb_camera", {"device_id": 1})

# ‡∏à‡∏±‡∏ö‡∏†‡∏≤‡∏û‡∏à‡∏≤‡∏Å‡∏ó‡∏∏‡∏Å‡∏Å‡∏•‡πâ‡∏≠‡∏á
images = camera_manager.capture_all()
```

### Batch Processing

```python
from pwd_library.image_processing.preprocessor import ImagePreprocessor

preprocessor = ImagePreprocessor()

# ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏• batch
images = [cv2.imread(f"image_{i}.jpg") for i in range(10)]
batch = preprocessor.preprocess_batch(images, normalize_method="zero_one")

# Batch inference
results = processor.batch_predict(images)
```

### Performance Monitoring

```python
from pwd_library.model.hailo8_processor import HailoHealthMonitor

# ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û
monitor = HailoHealthMonitor()

# ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å inference ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ñ‡∏£‡∏±‡πâ‡∏á
monitor.log_inference(success=True, inference_time=0.05)

# ‡∏î‡∏π‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥
stats = monitor.get_stats()
print(f"FPS: {stats['avg_fps']:.2f}, Success Rate: {stats['success_rate']:.2%}")
```

## üêõ Error Handling

```python
from pwd_library.utils.exceptions import CameraError, InferenceError, handle_exception

try:
    # Your code here
    result = processor.predict(image)
except InferenceError as e:
    logger.error(f"Inference failed: {e.message} (Code: {e.error_code})")
    result = handle_exception(e, default_return=[])
```

## üß™ Testing

```bash
# ‡∏£‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö
python -m pytest tests/

# ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏•‡πâ‡∏≠‡∏á
python -c "
from pwd_library.camera.picamera2_cm3 import detect_available_cameras
cameras = detect_available_cameras()
print(f'Found {len(cameras)} camera(s)')
"

# ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Hailo device
python -c "
from pwd_library.model.hailo8_processor import detect_hailo_devices
devices = detect_hailo_devices()
print(f'Found {len(devices)} Hailo device(s)')
"
```

## üìà Performance Tips

### ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Raspberry Pi
```python
# ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏Å‡∏•‡πâ‡∏≠‡∏á
camera.optimize_for_performance()

# ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ GPU memory
# ‡πÉ‡∏ô /boot/config.txt: gpu_mem=256

# ‡πÉ‡∏ä‡πâ threading ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö real-time processing
import threading
from concurrent.futures import ThreadPoolExecutor
```

### ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö AI Inference
```python
# ‡πÉ‡∏ä‡πâ batch processing
batch_size = 4
results = processor.batch_predict(images[:batch_size])

# Memory management
with processor.inference_context():
    result = processor.predict(image)
```

## ü§ù Contributing

‡πÄ‡∏£‡∏≤‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏£‡πà‡∏ß‡∏°‡∏û‡∏±‡∏í‡∏ô‡∏≤! ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏≠‡πà‡∏≤‡∏ô guidelines ‡πÉ‡∏ô:
- [Python Best Practices](dev-knowledge-base/python/best_practices.md)
- [Git Guidelines](dev-knowledge-base/git/common_command.md)

## üìÑ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## üÜò Support & Contact

- **Documentation**: [dev-knowledge-base/](dev-knowledge-base/)
- **Issues**: ‡∏™‡∏£‡πâ‡∏≤‡∏á GitHub issue
- **Email**: contact@pwdvisionworks.com
- **Website**: https://pwdvisionworks.com

## üîÑ Changelog

### v1.0.0 (Current)
- ‚úÖ Raspberry Pi Camera support
- ‚úÖ Hailo8 AI integration
- ‚úÖ Image processing pipeline
- ‚úÖ Comprehensive documentation
- ‚úÖ Error handling system
- ‚úÖ Performance monitoring

### Upcoming Features
- üöß Web interface ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö monitoring
- üöß Cloud integration
- üöß Additional AI model support
- üöß Mobile app connectivity

---

**PWD Vision Works** - Making Computer Vision Accessible
